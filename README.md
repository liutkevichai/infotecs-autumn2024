# Тестовое задание для стажера на позицию «Разработчик Java»
Сервис-хранилище типа "ключ-значение"
Необходимо разработать простой сервис который будет хранить данные в оперативной памяти по текстовому ключу. 
https://ru.wikipedia.org/wiki/База_данных_«ключ-значение»

Необходимая функциональность:

1. Операция чтения (get)
	Принимает следующие параметры:
		a) ключ для хранилища.	
	Возвращает данные, хранящиеся по переданному ключу или метку отсутствия данных.
	
2. Операция записи (set)
	Принимает следующие параметры:
		a) ключ для хранилища;
		b) данные для хранилища, которые будут ассоциированы с переданным ключом;
		c) опциональный параметр ttl (продолжительность жизни записи), 
			по истечении данного временного промежутка данная пара ключ-значение должна автоматически удаляться из хранилища.
			Если параметр не передан - использовать ttl по-умолчанию.
	Если по переданному ключу уже хранятся данные - их нужно заменять, а также обновлять ttl у данной записи.
	Возвращает метку успешности или неуспешности операции.

3. Операция удаления (remove)
	Принимает следующие параметры:
		a) ключ для хранилища.
	Удаляет данные, хранящиеся по переданному ключу.
	Возвращает данные, хранившиеся по переданному ключу или метку отсутствия данных.

4. Операция сохранения текущего состояния (dump)
	Сохраняет текущее состояние хранилища и возвращает его в виде загружаемого файла.
	
5. Операция загрузки состояния хранилища (load)
	Загружает состояние хранилища из файла, созданного операцией dump (пункт 4).

6 (дополнительно). Библиотека-драйвер, позволяющая работать с вашим удалённым сервисом из java-кода. Что-похожее на драйвера к базам данных.
	Т.е. для инициализации библиотека получает адрес+порт вашего сервиса и при вызове её методов обращается к вашему сервису.

Требования к сервису:
1. При создании сервиса можно воспользоваться любым из указанных фреймворков: Spring Framework, Spring Boot, или написать приложение на чистой Java.
2. Сервис должен запускаться как standalone-приложение (java -jar service.jar).
3. Необходимо покрыть код unit-тестами. Полнота покрытия остается на усмотрение автора решения.
4. Приложение должно собираться с использованием Maven или Gradle.
5. Общение с сервисом должно осуществляться по протоколу HTTP. По возможности придерживайтесь REST-архитектуры.
6. Не использовать отдельно устанавливаемые базы данных, кэши и т.п. 
	Можно хранить данные в памяти приложения или использовать простые встраиваемые базы данных (HSQLDB, H2 или Apache Derby).

# О реализации
В директории CacheService находятся файлы сервиса для хранения данных в оперативной памяти с доступом по текстовому ключу.

Класс CacheService - реализация кэша на основе потокобезопасной карты ConcurrentHashMap и планировщика ScheduledExecutorService из пакета java.util.concurrent. Значения для ключей сохраняются в виде объектов внутреннего класса Value, который позволяет сохранить вместе со значением задачу ScheduledFuture на удаление записи по истечении заданного TTL.

Класс CacheServer запускает HTTP-сервер для управления кэшем с помощью HTTP-запросов. Для обработки запросов используется класс HttpServer из пакета com.sun.net.httpserver. Сервер кэша поддерживает стандартные методы GET, POST, PUT и DELETE, а также операции сохранения и загрузки состояния из файла (метод POST для обеих). В этом классе также находится метод main, запускающий сервис.

Для тестирования использовался JUnit Jupiter 5.9.0.

Сборка проекта производится с помощью Maven:

	mvn clean package

Сервис запускается консольной командой:

	java -jar service.jar [options]

Options:
	--port <port>		Порт
	--ttl <milliseconds>	Время жизни записи по умолчанию

По умолчанию сервис использует следующие параметры: --port 8080 --ttl 5000

В директории CacheLib находится библиотека-драйвер для удаленного обращения к серверу хранилища. Содержит единственный класс CacheClient, 
реализованный на основе HttpClient из пакета java.net.http.
